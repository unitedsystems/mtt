# MTT

МТТ это консольный чат.

# Установка

```
go get -u github.com/unitedsystems/mtt/cmd/mtt-client
go get -u github.com/unitedsystems/mtt/cmd/mtt-server
```

# Использование

Сервер:
```
mtt-server -a localhost:9876
```

Клиент:
```
mtt-client -a localhost:9876 -r room1:username1,room2:username2,...
```
Чтобы написать сообщение введите название комнаты и ваш текст и нажмите Enter.
```
room1 мое сообщение
```

# Архитектура

Состоит из движка чата, сервера и клиента.

**Движок** это производительный код в отдельном package, который содержит логику обмена сообщениями между пользователями и комнатами.
Каждая комната содержит кольцевой буфер сообщений размером с историю. Связи между пользователями и комнатами чата (многие ко многим) помнят последний номер сообщения, которые они отправили пользователю и по запросу от клиента вычитывают обновление. Новые сообщения отправляются пользователю пакетами, которые содержат сообщения из нескольких комнат.

Движок подключается в **gRPC сервер**, который стримит сообщения между клиентами и сервером.

Сам **клиент** очень простой он просто отправляет и принимает текстовые команды.
Единственная бизнес логика, которую он несет - сортировка полученого пакета сообщений по времени.

# DFD
![dfd](https://raw.githubusercontent.com/unitedsystems/mtt/master/docs/dfd.png)


# Roadmap
![roadmap](https://raw.githubusercontent.com/unitedsystems/mtt/master/docs/roadmap.png)
